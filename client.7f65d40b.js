webpackJsonp([3],{100:function(t,e,n){function r(t){return n(o(t))}function o(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./ar":17,"./ar.js":17,"./be":18,"./be.js":18,"./bg":19,"./bg.js":19,"./ca":20,"./ca.js":20,"./da":21,"./da.js":21,"./de":22,"./de.js":22,"./el":23,"./el.js":23,"./en":24,"./en.js":24,"./en_short":25,"./en_short.js":25,"./es":26,"./es.js":26,"./eu":27,"./eu.js":27,"./fi":28,"./fi.js":28,"./fr":29,"./fr.js":29,"./he":30,"./he.js":30,"./hu":31,"./hu.js":31,"./in_BG":32,"./in_BG.js":32,"./in_HI":33,"./in_HI.js":33,"./in_ID":34,"./in_ID.js":34,"./it":35,"./it.js":35,"./ja":36,"./ja.js":36,"./ko":37,"./ko.js":37,"./locales":38,"./locales.js":38,"./ml":39,"./ml.js":39,"./nb_NO":40,"./nb_NO.js":40,"./nl":41,"./nl.js":41,"./nn_NO":42,"./nn_NO.js":42,"./pl":43,"./pl.js":43,"./pt_BR":44,"./pt_BR.js":44,"./ro":45,"./ro.js":45,"./ru":46,"./ru.js":46,"./sv":47,"./sv.js":47,"./ta":48,"./ta.js":48,"./th":49,"./th.js":49,"./tr":50,"./tr.js":50,"./uk":51,"./uk.js":51,"./vi":52,"./vi.js":52,"./zh_CN":53,"./zh_CN.js":53,"./zh_TW":54,"./zh_TW.js":54};r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=100},102:function(t,e,n){t.exports=n(55)},14:function(t,e,n){"use strict";function r(t){var e=t.className,n=void 0===e?"":e,r=t.post;return a.h("div",{class:n+" Card"},a.h("div",{class:"Card__picture"},a.h(i.Link,{style:{backgroundImage:"url("+(r.picture||o.randomImage())+")"},href:"/p/"+r._id})),a.h("div",{class:"Card__main"},a.h("h3",null,a.h(i.Link,{href:"/p/"+r._id},r.title)),a.h("p",null,r.summary),a.h("div",{class:"Card__footer"},a.h("div",{class:"Card__user"},a.h(i.Link,{href:"/u/"+r.author.name},r.author.name),a.h("span",{class:"Card__user__part"},"发表于"),a.h(s.default,{datetime:r.createdAt,locale:"zh_CN"})),a.h(i.Link,{href:"/p/"+r._id+"#comments"},r.comments," 条评论"))))}Object.defineProperty(e,"__esModule",{value:!0}),n(83);var o=n(2),a=n(0),i=n(5),s=n(6);e.default=r},15:function(t,e,n){"use strict";function r(){return i.h("div",null,i.h("div",{class:"Placeholder"},i.h("div",{class:"Placeholder__img"})),Array(4).fill("").map(function(t,e){return i.h("div",{class:"Placeholder"},Array(3-e).fill("").map(function(){return i.h("div",{class:"Placeholder__inline"})}),i.h("div",{class:"Placeholder__inline "+(e<3?"Placeholder__inline--leftover":"")}))}))}function o(){return i.h("div",{class:"row"},Array(2).fill("").map(function(t){return i.h("div",{class:"column Placeholder"},i.h("div",{class:"Placeholder__avatar"}),i.h("div",{class:"Placeholder__metaInline"}),i.h("div",{class:"Placeholder__inline"}),i.h("div",{class:"Placeholder__inline"}),i.h("div",{class:"Placeholder__inline Placeholder__inline--leftover"}))}))}function a(){return i.h("div",{style:"Login"},i.h("div",{class:"column Placeholder"},i.h("div",{class:"Placeholder__avatar"}),i.h("div",{class:"Placeholder__metaInline"}),i.h("div",{class:"Placeholder__inline"}),i.h("div",{class:"Placeholder__inline"}),i.h("div",{class:"Placeholder__inline Placeholder__inline--leftover"})))}Object.defineProperty(e,"__esModule",{value:!0}),n(89);var i=n(0);e.EditPlaceholder=r,e.CardPlaceholder=o,e.LoginPlaceholder=a},2:function(t,e,n){"use strict";function r(t,e){return Math.round(Math.random()*(e-t))+t}function o(t,e){return void 0===t&&(t=600),void 0===e&&(e=700),"https://unsplash.it/600/"+r(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(58),i=n(94);n(82),e.random=r;var s=a.default.create({baseURL:"//ablog.now.sh/v1/",withCredentials:!0});i.configure({showSpinner:!1}),s.interceptors.request.use(function(t){return i.start(),t},function(t){return i.done(),Promise.reject(t)}),s.interceptors.response.use(function(t){return i.done(),t},function(t){return i.done(),Promise.reject(t)}),e.http=s,e.randomImage=o},4:function(t,e,n){"use strict";function r(t){var e=t.avatar,n=t.name,r=a(t,["avatar","name"]);return i.h("img",o({},r,{src:e||"//api.adorable.io/avatar/"+n,alt:n}))}var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},a=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.default=r},55:function(t,e,n){"use strict";function r(){var t=n(80).default;o=a.render(a.h(t,null),document.getElementById("app"),o)}Object.defineProperty(e,"__esModule",{value:!0}),n(90),n(93);var o,a=n(0);r()},76:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);n(84);var s=n(2),u=n(0),l=n(6),c=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.submitComment=function(t){return o(r,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return t.preventDefault(),[4,s.http.post("/posts/"+this.props.postId+"/comments",this.state.formData)];case 1:return e.sent(),this.props.onSubmit(),this.setState({formData:{}}),[2]}})})},r.state={formData:{}},r}return r(e,t),e.prototype.render=function(t){var e=t.user;return u.h("form",{onSubmit:this.submitComment,class:"Comment__box"},u.h("textarea",{value:this.state.formData.content,onInput:this.linkState("formData.content"),cols:30,rows:10,maxLength:1e3}),e?u.h("div",{class:"Comment__box__tool"},u.h("div",null,e.name),u.h("input",{type:"submit",value:"评论"})):u.h("div",{class:"Comment__box__tool"},u.h("input",{value:this.state.formData.username,onInput:this.linkState("formData.username"),type:"text",placeholder:"用户名"}),u.h("input",{value:this.state.formData.useremail,onInput:this.linkState("formData.useremail"),type:"email",placeholder:"邮箱"}),u.h("input",{type:"submit",value:"评论"})))},e}(u.Component),h=function(t){var e=t.list;return u.h("div",{class:"Comment__list",id:"comments"},e.map(function(t){return u.h("div",{class:"Comment__item"},u.h(i.default,{class:"Comment__avatar",name:t.username,avatar:t.avatar}),u.h("div",{class:"Comment__detail"},u.h("div",{class:"Comment__detail__header"},u.h("span",{className:"Comment__detail__name"},t.username),u.h(l.default,{class:"Comment__detail__time",datetime:t.createdAt,locale:"zh_CN"})),u.h("div",{class:"Comment__detail__body"},t.content)))}))},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fetchList=function(){return o(e,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,s.http.get("/posts/"+this.props.postId+"/comments")];case 1:return t=e.sent(),this.setState({list:t.data}),[2]}})})},e}return r(e,t),e.prototype.componentWillMount=function(){this.fetchList()},e.prototype.render=function(t,e){var n=t.user,r=e.list;return u.h("div",{class:"Comment"},u.h(c,{onSubmit:this.fetchList,user:n,postId:this.props.postId}),r?u.h(h,{list:r}):u.h("div",{class:"Comment__loading"},"Loading..."))},e}(u.Component);e.default=f},77:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),s=n(15);n(85);var u=n(2),l=n(81),c=n(0),h=n(5),f=function(){return c.h("div",{class:"Home__banner"},c.h("h1",null,"纸糊专栏"),c.h("p",null,"爱写不写，爱看不看"))},p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentWillMount=function(){return o(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return[4,u.http.get("/posts/type/new")];case 1:return t=n.sent(),[4,u.http.get("/posts/type/hot")];case 2:return e=n.sent(),this.setState({newList:l(t.data,2),hotList:l(e.data,2)}),[2]}})})},e.prototype.render=function(t,e){var n=t.user,r=e.newList,o=e.hotList;return c.h("section",{class:"Home"},c.h(f,null),c.h("p",null,c.h(h.Link,{href:n?"/edit":"/login",class:"button"},n?"开始写文章":"登录后开始写文章")),c.h("div",{class:"Home__part"},c.h("h4",{class:"Home__part__title"},"最新"),Array.isArray(r)?r.map(function(t){return c.h("div",{class:"row"},t.map(function(t){return c.h(i.default,{className:"column",post:t})}))}):c.h(s.CardPlaceholder,null)),c.h("div",{class:"Home__part"},c.h("h4",{class:"Home__part__title"},"热门"),Array.isArray(o)?o.map(function(t){return c.h("div",{class:"row"},t.map(function(t){return c.h(i.default,{className:"column",post:t})}))}):c.h(s.CardPlaceholder,null)),c.h("div",{class:"Home__part"},c.h(h.Link,{href:"/posts"},"查看全部")))},e}(c.Component);e.default=p},78:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),u=n(14);n(86);var l=n(2),c=n(0),h=function(t){var e=t.count;return c.h("div",{class:"List__banner"},c.h("h1",null,"全部文章"),c.h("p",null,"总共发布了 ",e," 篇"))},f=function(t){var e=t.user,n=t.count;return c.h("div",{class:"List__banner"},c.h("p",null,c.h(s.default,o({},e))),c.h("h3",null,e.name),c.h("p",null,"总共发布了 ",n," 篇"))},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={count:0,data:[],user:void 0},e}return r(e,t),e.prototype.componentWillMount=function(){return a(this,void 0,void 0,function(){var t,e,n,r;return i(this,function(o){switch(o.label){case 0:return t=this.props.name,e={},t?[4,l.http.get("/user?name="+t)]:[3,2];case 1:n=o.sent().data,e.author=n.name,this.setState({user:n}),o.label=2;case 2:return[4,l.http.get("/posts",{params:e})];case 3:return r=o.sent(),this.setState(r.data),[2]}})})},e.prototype.render=function(t,e){var n=e.data,r=e.count,o=e.user;return c.h("section",{class:"List"},o?c.h(f,{user:o,count:r}):c.h(h,{count:r}),c.h("div",null,n.map(function(t){return c.h(u.default,{post:t})})))},e}(c.Component);e.default=p},79:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var i=n(76);n(87);var s=n(2),u=n(0),l=n(6),c=n(101),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={imgs:[],post:{author:{}},loading:!0},e}return r(e,t),e.prototype.componentWillMount=function(){return o(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,s.http.get("/posts/"+this.props.id)];case 1:return t=e.sent(),this.setState({post:t.data,loading:!1}),[4,s.http.get("/posts/"+this.props.id+"/pv")];case 2:return e.sent(),[2]}})})},e.prototype.componentDidUpdate=function(){this.state.imgs.forEach(function(t){return t()}),this.state.imgs=[].slice.call(this.base.querySelectorAll("article img")).map(c)},e.prototype.componentDidUnMount=function(){this.state.imgs.forEach(function(t){return t()})},e.prototype.render=function(t,e){var n=t.user,r=e.post,o=e.loading;return u.h("div",{class:"Post"},!o&&u.h("img",{class:"Post__picture",src:r.picture||s.randomImage(350,370),alt:r.title}),u.h("h1",{class:"Post__title"},r.title),u.h("div",{class:"Post__info"},u.h("span",null,r.author.name),u.h(l.default,{datetime:r.createdAt||new Date,locale:"zh_CN"}),u.h("a",{href:"/edit/"+r._id},"编辑")),u.h("article",{class:"Post__article",dangerouslySetInnerHTML:{__html:r.content}}),!o&&u.h(i.default,{postId:r._id,user:n}))},e}(u.Component);e.default=h},80:function(t,e,n){"use strict";function r(){return n.e(0).then(n.bind(null,103)).then(function(t){return t.default})}function o(){return n.e(1).then(n.bind(null,104)).then(function(t){return t.default})}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(e,"__esModule",{value:!0});var u=n(4),l=n(15);n(88);var c=n(2),h=n(0),f=n(95),p=n(8),d=n(5),_=n(98),v=n(77),m=n(78),y=n(79),b=function(t){var e=t.user;return h.h("div",{class:"float-right Nav__tool"},h.h(d.Link,{href:"/edit",class:"button button-outline button-small Nav__tool__item"},"写文章"),h.h(u.default,{avatar:e.avatar,name:e.name,class:"Nav__tool__item"}),h.h(d.Link,{class:"Nav__tool__item",href:"/u/"+e.name},e.name))},w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getCurrentUser=function(){return i(this,void 0,void 0,function(){var t,e,n;return s(this,function(r){switch(r.label){case 0:t=_.get("user"),t&&this.setState({user:t}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c.http.get("/user/current")];case 2:return e=r.sent().data,this.setState({user:e}),_.set("user",e),[3,4];case 3:return n=r.sent(),this.setState({user:void 0}),_.remove("user"),[3,4];case 4:return[2]}})})},e.prototype.componentWillMount=function(){this.getCurrentUser()},e.prototype.render=function(t,e){var n=e.user;return h.h("div",null,h.h("nav",{class:"Nav"},h.h("div",{class:"container"},h.h(d.Link,{href:"/"},"纸糊"),n?h.h(b,{user:n}):h.h(d.Link,{href:"/login",class:"float-right"},"登录 / 注册"))),h.h("main",{class:"container"},h.h(p.default,null,h.h(v.default,{path:"/",user:n}),h.h(m.default,{path:"/u/:name",user:n}),h.h(m.default,{path:"/posts"}),h.h(y.default,{path:"/p/:id",user:n}),h.h(f,{path:"/login",component:o,loading:function(){return h.h(l.LoginPlaceholder,null)}}),h.h(f,{path:"/edit",component:r,loading:function(){return h.h(l.EditPlaceholder,null)}}),h.h(f,{path:"/edit/:id",component:r,loading:function(){return h.h(l.EditPlaceholder,null)}})),h.h("footer",{class:"Footer"},"♥ ",h.h("a",{href:"//github.com/QingWei-Li/ablog"},"GitHub"))))},e}(h.Component);e.default=w},83:function(t,e){},84:function(t,e){},85:function(t,e){},86:function(t,e){},87:function(t,e){},88:function(t,e){},89:function(t,e){},90:function(t,e){}},[102]);